<!DOCTYPE html>
<html>
<head>
    <title>Firebase Save Helper</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration (same as extension)
        const firebaseConfig = {
            apiKey: "AIzaSyD7sueQsP0m-xhFQ4C3YVUMINEMvyBWI2w",
            authDomain: "stars-qr-code.firebaseapp.com",
            projectId: "stars-qr-code",
            storageBucket: "stars-qr-code.appspot.com",
            messagingSenderId: "893928368865",
            appId: "1:893928368865:web:662c503f2e40c4dfdb65a0"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Function to save QR code
        window.saveQRCode = async function(qrData) {
            try {
                console.log('üî• Saving QR code:', qrData);
                
                // Add timestamps if not present
                if (!qrData.createdAt) {
                    qrData.createdAt = serverTimestamp();
                }
                if (!qrData.updatedAt) {
                    qrData.updatedAt = serverTimestamp();
                }
                
                const docRef = await addDoc(collection(db, 'qrCodes'), qrData);
                console.log('‚úÖ QR code saved successfully with ID:', docRef.id);
                
                return {
                    success: true,
                    firebaseId: docRef.id,
                    message: 'QR code saved to database'
                };
            } catch (error) {
                console.error('‚ùå Error saving QR code:', error);
                return {
                    success: false,
                    error: error.message
                };
            }
        };

        console.log('‚úÖ Firebase Save Helper loaded successfully');
    </script>
</head>
<body>
    <h1>Firebase Save Helper</h1>
    <p>This page helps the Chrome extension save QR codes to Firebase.</p>
    <p>Status: <span id="status">Ready</span></p>
    
    <script>
        // Update status
        document.getElementById('status').textContent = 'Firebase initialized and ready';
    </script>
</body>
</html> 